<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Html5 on 文翼的博客</title>
    <link>http://blog.wenzhixin.net.cn/tags/html5/</link>
    <description>Recent content in Html5 on 文翼的博客</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <copyright>wenzhixin.net.cn 粤ICP备15117953号</copyright>
    <lastBuildDate>Thu, 28 Nov 2013 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://blog.wenzhixin.net.cn/tags/html5/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Ajax 文件上传——通过 html5 的方法</title>
      <link>http://blog.wenzhixin.net.cn/2013/11/28/ajax_file_upload_html5</link>
      <pubDate>Thu, 28 Nov 2013 00:00:00 +0000</pubDate>
      
      <guid>http://blog.wenzhixin.net.cn/2013/11/28/ajax_file_upload_html5</guid>
      <description>

&lt;h4 id=&#34;html5-方法:f5a698885091fe9812ae461e6526e53b&#34;&gt;html5 方法&lt;/h4&gt;

&lt;p&gt;上篇文章讲到 Ajax 文件上传是如何通过 iframe 的方法，这里我们通过 html5 的方法来进行文件的上传。&lt;/p&gt;

&lt;p&gt;在 html5 标准中，XMLHttpRequest 对象被重新定义，称为“XMLHttpRequest Level 2”，其中包含了文件相关的新特性：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;支持上传、下载字节流，比如文件、blob以及表单数据&lt;/li&gt;
&lt;li&gt;增加了上传、下载中的进度事件&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;关于 XMLHttpRequest Level 2，阮一峰有一篇文章介绍的很详细，就不多做解释了，详细见：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.w3.org/TR/XMLHttpRequest2/&#34;&gt;官网 XMLHttpRequest2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2012/09/xmlhttprequest_level_2.html&#34;&gt;XMLHttpRequest Level 2 使用指南&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;首先，创建一个 XMLHttpRequest2 的实例：&lt;/p&gt;
var xhr = new XMLHttpRequest();

&lt;p&gt;添加 file 控件，这里我们使用 multiple 属性来支持多文件的选择。&lt;/p&gt;
&lt;input id=&#34;filename&#34; type=&#34;file&#34; multiple=&#34;multiple&#34; /&gt;

&lt;p&gt;获取并保存选择的多个文件。&lt;/p&gt;
var files = document.getElementById(&#39;filename&#39;).files;

&lt;p&gt;接下来，要介绍的是另一个 html5 推出的新对象：FormData。&lt;/p&gt;

&lt;p&gt;FormData 对象是用户的表单数据的集合，
它以键值对的形式存储了表单数据，其值能够包括数字、字符串以及文件。
我们通过这个对象，来向服务器提交我们的文件数据。&lt;/p&gt;
var formData = new FormData();
formData.append(&#39;filename&#39;, files[index]); // index 为第 n 个文件的索引
xhr.open(&#39;post&#39;, url); // url 为提交的后台地址
xhr.send(formData);

&lt;p&gt;这样就完成了一次文件的上传，多个文件我们遍历多个文件重复这个步骤即可。&lt;/p&gt;

&lt;p&gt;接下来是对上传事件的监听：&lt;/p&gt;
xhr.upload.addEventListener(&#34;progress&#34;, uploadProgress, false); // 处理上传进度
xhr.addEventListener(&#34;load&#34;, uploadComplete, false); // 处理上传完成
xhr.addEventListener(&#34;error&#34;, uploadFailed, false); // 处理上传失败
xhr.addEventListener(&#34;abort&#34;, uploadCanceled, false); // 处理取消上传

&lt;p&gt;在不同的事件中做不同的处理在完成所有的文件上传后再显示结果，使用 html5 的方法是不是很简单呢。&lt;/p&gt;

&lt;h4 id=&#34;使用-html5-的-jquery-插件:f5a698885091fe9812ae461e6526e53b&#34;&gt;使用 html5 的 jQuery 插件&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/mihaild/jquery-html5-upload&#34;&gt;jquery-html5-upload&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&#34;浏览器支持情况:f5a698885091fe9812ae461e6526e53b&#34;&gt;浏览器支持情况&lt;/h4&gt;

&lt;p&gt;因为用到了新的特性，所以只有在支持这些新对象的浏览器下才可以支持我们的代码，
可以通过&lt;a href=&#34;http://caniuse.com/&#34;&gt;这里&lt;/a&gt;查看浏览器的支持情况。&lt;/p&gt;

&lt;p&gt;最后，对于不支持的浏览器，我们做了降级处理，优先使用 html5 方法，
在浏览器不支持的情况下，使用上一篇提到的 iframe 的方法，
当然也可以考虑将介绍到的两个 jQuery 插件合并起来。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>泰囧台词生成器（html5 版）</title>
      <link>http://blog.wenzhixin.net.cn/2013/01/10/fill_text</link>
      <pubDate>Thu, 10 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>http://blog.wenzhixin.net.cn/2013/01/10/fill_text</guid>
      <description>&lt;p&gt;最近经常看到别人 PS 来恶搞&amp;rdquo;泰囧&amp;rdquo;电影中的台词，觉得挺好玩的&lt;/p&gt;

&lt;p&gt;先上效果图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://blog.wenzhixin.net.cn/2013/01/10/1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;就想用 html5 自己也做一个来玩玩，查了下 API，发现还是挺简单的。&lt;/p&gt;
context.fillText(text, x, y, width)

&lt;p&gt;参数：&lt;/p&gt;
text: 要生成的文字

x: 生成文字的 x 坐标

y: 生成文字的 y 坐标

width: 生成文字的宽度，超过会自动换行

&lt;p&gt;主要代码：&lt;/p&gt;

&lt;p&gt;html:&lt;/p&gt;
&lt;canvas id=&#34;canvas&#34; width=&#34;360&#34; height=&#34;607&#34; class=&#34;fl&#34;&gt;&lt;/canvas&gt;
&lt;div class=&#34;fl ml10&#34;&gt;
    &lt;input type=&#34;text&#34; placeholder=&#34;上了5天班？&#34; maxlength=&#34;20&#34; /&gt;
    &lt;input type=&#34;text&#34; placeholder=&#34;以为今天星期五吧？&#34; maxlength=&#34;20&#34; /&gt;
    &lt;input type=&#34;text&#34; placeholder=&#34;今天是星期三！哈哈哈哈！&#34; maxlength=&#34;20&#34; /&gt;
    &lt;button id=&#34;create&#34;&gt;生成&lt;/button&gt;
&lt;/div&gt;

&lt;p&gt;js:&lt;/p&gt;
context.drawImage(image, 0, 0);
context.fillStyle = &#39;#ffffff&#39;;
context.font = &#39;bold 20px 微软雅黑&#39;;
$inputs.each(function(i) {
    var text = $(this).val() || $(this).attr(&#39;placeholder&#39;);
    context.fillText(text, (canvas.width - text.length * 20) / 2, 200 * (i + 1) - 10, canvas.width);
});

&lt;hr /&gt;

&lt;p&gt;源代码(当然，请用支持 html5 的浏览器)：&lt;a href=&#34;http://blog.wenzhixin.net.cn/demos/filltext/&#34;&gt;demo&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>html5 canvas 画图实例——rotate</title>
      <link>http://blog.wenzhixin.net.cn/2012/05/20/html5_canvas_drawing_examples_rotate</link>
      <pubDate>Sun, 20 May 2012 00:00:00 +0000</pubDate>
      
      <guid>http://blog.wenzhixin.net.cn/2012/05/20/html5_canvas_drawing_examples_rotate</guid>
      <description>&lt;p&gt;接口：context.rotate(angle) &lt;/p&gt;

&lt;p&gt;功能：按给定的弧度旋转,按顺时针旋转。&lt;/p&gt;

&lt;p&gt;说明：rotate 方法旋转的中心始终是canvas 的原点，使&lt;/p&gt;

&lt;p&gt;用translate 方法可以改变它。&lt;/p&gt;

&lt;p&gt;例子：&lt;/p&gt;

&lt;p&gt;效果：&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww2.sinaimg.cn/mw600/88a9c274jw1dt4ons6vzyg.gif&#34; alt=&#34;html5 canvas
画图实例——rotate&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww1.sinaimg.cn/mw600/88a9c274jw1dt4onxroqvg.gif&#34; alt=&#34;html5 canvas
画图实例——rotate&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww4.sinaimg.cn/mw600/88a9c274jw1dt4oo3hq50g.gif&#34; alt=&#34;html5 canvas
画图实例——rotate&#34; /&gt;&lt;/p&gt;

&lt;p&gt;代码：&lt;/p&gt;
&lt;canvas id=&#34;canvas&#34; height=&#34;400&#34;&gt;&lt;/canvas&gt;
&lt;script type=&#34;text/javascript&#34;&gt;

var canvas = document.getElementById(&#34;canvas&#34;);
var context = canvas.getContext(&#34;2d&#34;);
context.fillStyle = &#34;#000&#34;;
context.fillRect(0, 0, 400, 400);
context.translate(200, 200);

for (var i = 1; i &lt; 6; i++) {
    context.fillStyle = &#34;rgb(255, &#34; + (255 - 51 * i) + &#34;, &#34; + (51 * i)+ &#34;)&#34;;
    for (var j = 0; j &lt; i * 6; j++) {
        context.rotate(Math.PI * 2 / (6 * i));
        context.fillRect(0, 30 * i, 10, 10);
        context.beginPath();
        context.arc(0, 30 * i, 10, 0, Math.PI * 2, true);
        context.fill();
    }
}
&lt;/script&gt;
</description>
    </item>
    
    <item>
      <title>html5 canvas 画图实例——rotate</title>
      <link>http://blog.wenzhixin.net.cn/2012/05/20/html5_canvas_drawing_examples_rotate</link>
      <pubDate>Sun, 20 May 2012 00:00:00 +0000</pubDate>
      
      <guid>http://blog.wenzhixin.net.cn/2012/05/20/html5_canvas_drawing_examples_rotate</guid>
      <description>&lt;p&gt;接口：context.rotate(angle) &lt;/p&gt;

&lt;p&gt;功能：按给定的弧度旋转,按顺时针旋转。&lt;/p&gt;

&lt;p&gt;说明：rotate 方法旋转的中心始终是canvas 的原点，使&lt;/p&gt;

&lt;p&gt;用translate 方法可以改变它。&lt;/p&gt;

&lt;p&gt;例子：&lt;/p&gt;

&lt;p&gt;效果：&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww2.sinaimg.cn/mw600/88a9c274jw1dt4ons6vzyg.gif&#34; alt=&#34;html5 canvas
画图实例——rotate&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww1.sinaimg.cn/mw600/88a9c274jw1dt4onxroqvg.gif&#34; alt=&#34;html5 canvas
画图实例——rotate&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://ww4.sinaimg.cn/mw600/88a9c274jw1dt4oo3hq50g.gif&#34; alt=&#34;html5 canvas
画图实例——rotate&#34; /&gt;&lt;/p&gt;

&lt;p&gt;代码：&lt;/p&gt;
&lt;canvas id=&#34;canvas&#34; height=&#34;400&#34;&gt;&lt;/canvas&gt;
&lt;script type=&#34;text/javascript&#34;&gt;

var canvas = document.getElementById(&#34;canvas&#34;);
var context = canvas.getContext(&#34;2d&#34;);
context.fillStyle = &#34;#000&#34;;
context.fillRect(0, 0, 400, 400);
context.translate(200, 200);

for (var i = 1; i &lt; 6; i++) {
    context.fillStyle = &#34;rgb(255, &#34; + (255 - 51 * i) + &#34;, &#34; + (51 * i)+ &#34;)&#34;;
    for (var j = 0; j &lt; i * 6; j++) {
        context.rotate(Math.PI * 2 / (6 * i));
        context.fillRect(0, 30 * i, 10, 10);
        context.beginPath();
        context.arc(0, 30 * i, 10, 0, Math.PI * 2, true);
        context.fill();
    }
}
&lt;/script&gt;
</description>
    </item>
    
  </channel>
</rss>